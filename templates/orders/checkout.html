{% extends 'base.html' %}

{% block title %}ุฅุชูุงู ุงูุทูุจ - ูุชุฌุฑ ุงูุฃุฒูุงุก ุงููุฑุญ{% endblock %}

{% block content %}
<div class="container">
    <h1 style="text-align: center; font-size: 2.5rem; margin-bottom: 2rem; font-weight: 900;">
        ุฅุชูุงู ุงูุทูุจ ๐
    </h1>

    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 2rem;">
        <!-- Checkout Form -->
        <div style="background: white; padding: 2rem; border-radius: var(--radius-lg); box-shadow: var(--shadow-md);">
            <h2 style="font-size: 1.75rem; font-weight: 700; margin-bottom: 1.5rem;">
                ูุนูููุงุช ุงูุชูุตูู ๐ฆ
            </h2>

            <form method="post">
                {% csrf_token %}

                <div class="form-group">
                    <label class="form-label">ุงูุงุณู ุงููุงูู *</label>
                    <input type="text" name="full_name" class="form-input" required placeholder="ุฃุฏุฎู ุงุณูู ุงููุงูู">
                </div>

                <div class="form-group">
                    <label class="form-label">ุฑูู ุงููุงุชู *</label>
                    <input type="tel" name="phone" class="form-input" required placeholder="05xxxxxxxx">
                </div>

                <div class="form-group">
                    <label class="form-label">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                    <input type="email" name="email" class="form-input" placeholder="example@email.com">
                </div>

                <div class="form-group">
                    <label class="form-label">ุงููุฏููุฉ *</label>
                    <input type="text" name="city" class="form-input" required placeholder="ุงูุฑูุงุถุ ุฌุฏุฉุ ุงูุฏูุงู...">
                </div>

                <div class="form-group">
                    <label class="form-label">ุงูุนููุงู ุงููุงูู *</label>
                    <textarea name="address" class="form-textarea" required
                        placeholder="ุงูุญูุ ุงูุดุงุฑุนุ ุฑูู ุงููุจูู..."></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">ุงูุฑูุฒ ุงูุจุฑูุฏู</label>
                    <input type="text" name="postal_code" class="form-input" placeholder="12345">
                </div>

                <div class="form-group">
                    <label class="form-label">ููุงุญุธุงุช ุงูุชูุตูู</label>
                    <textarea name="delivery_notes" class="form-textarea"
                        placeholder="ุฃู ููุงุญุธุงุช ุฎุงุตุฉ ุจุงูุชูุตูู..."></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">ููุงุญุธุงุช ุงูุทูุจ</label>
                    <textarea name="notes" class="form-textarea" placeholder="ุฃู ููุงุญุธุงุช ุฅุถุงููุฉ..."></textarea>
                </div>

                <div
                    style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); padding: 1.5rem; border-radius: var(--radius-md); margin-bottom: 1.5rem; color: white;">
                    <h3 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 0.5rem;">
                        ๐ฐ ุทุฑููุฉ ุงูุฏูุน
                    </h3>
                    <p style="font-size: 1.125rem;">
                        <strong>ุงูุฏูุน ุนูุฏ ุงูุงุณุชูุงู</strong> - ุงุฏูุน ููุฏุงู ุนูุฏ ุงุณุชูุงู ุทูุจู
                    </p>
                </div>

                <button type="submit" class="btn btn-primary"
                    style="width: 100%; font-size: 1.25rem; padding: 1.25rem;">
                    ุชุฃููุฏ ุงูุทูุจ โ
                </button>
            </form>
        </div>

        <!-- Order Summary -->
        <div>
            <div
                style="background: white; padding: 2rem; border-radius: var(--radius-lg); box-shadow: var(--shadow-md); position: sticky; top: 120px;">
                <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1.5rem; text-align: center;">
                    ููุฎุต ุงูุทูุจ ๐
                </h2>

                <div style="max-height: 300px; overflow-y: auto; margin-bottom: 1rem;">
                    {% for item in cart.items.all %}
                    <div
                        style="display: flex; gap: 1rem; margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid #e2e8f0;">
                        <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}"
                            style="width: 60px; height: 60px; object-fit: cover; border-radius: var(--radius-sm);">
                        <div style="flex: 1;">
                            <p style="font-weight: 700; font-size: 0.875rem;">{{ item.product.name }}</p>
                            <p style="color: var(--text-secondary); font-size: 0.875rem;">
                                {{ item.quantity }} ร {{ item.product.get_price }} ุฑ.ุณ
                            </p>
                        </div>
                        <p style="font-weight: 700;">{{ item.subtotal }} ุฑ.ุณ</p>
                    </div>
                    {% endfor %}
                </div>

                <div style="border-top: 2px solid #e2e8f0; padding-top: 1rem; margin-bottom: 1rem;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.75rem;">
                        <span style="color: var(--text-secondary);">ุนุฏุฏ ุงูููุชุฌุงุช:</span>
                        <span style="font-weight: 700;">{{ cart.total_items }}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                        <span style="color: var(--text-secondary);">ุงููุฌููุน:</span>
                        <span style="font-weight: 700;">{{ cart.total_price }} ุฑ.ุณ</span>
                    </div>
                </div>

                <div style="border-top: 2px solid #e2e8f0; padding-top: 1rem;">
                    <div style="display: flex; justify-content: space-between; font-size: 1.5rem; font-weight: 900;">
                        <span>ุงููุฌููุน ุงูููู:</span>
                        <span
                            style="background: var(--primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                            {{ cart.total_price }} ุฑ.ุณ
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    @media (max-width: 768px) {
        .container>div:first-child {
            grid-template-columns: 1fr !important;
        }
    }
</style>
{% endblock %}